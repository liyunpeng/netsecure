先说链路层， 保证可以发送数据包， ip网络层， 保证数据包可以冲一个地方窗

传到另一个地方，每个地方都有一个ip地址， 
tcp在链路层和ip层的基础上， 保证数据的可靠传输， 所谓可靠就是不丢包的传

输。 
通过给每个数据包设定一个序列号都保证传输的数据包有序， 

每个包的ack机制， 保证不丢包
但是每发一个数据包， 就要等一个确认，再发下一个数据包，发送速度会很慢， 
所以就有了缓冲区和滑动窗口 
数据包可以分为， 已发送已确认， 已发送未确认， 待发送， 和未发送的 ， 
所谓待发送， 是只接受方已经通知发送方准备好了， 发送方要尽快发送的数据
其中， 已发送未确认， 待发送的 就是滑动窗口， 
已发送未确认， 会变为已发送已确认， 待发送的会变成已发送未确认， 这个窗

口随着发送和收到的确认， 不断向右滑动， 所以叫做滑动窗口。 
上层会把数据包都丢给缓冲区， 上层就认为已经发送了， 其实底层有些还没发送， 这
个机制， 可以做到， 可以一次性的发送很多数据包， 一次性的收到多个数

据包的确认， 比如， 发送1， 2， 3个包， 接收方等到3个包收到发送一个确认

， 
tcp是全双攻通讯 ， 即双方可以同时接受和发送， 
这要求双发都有接收缓冲区， 发送缓冲区， 
双发都有发送的序列好，和接收的序列号， 
建立连接时， 必须把序列号，缓冲区建立好。 
用三次握手建立发送的序列号。 
所以
A给B建立发送缓冲区， 发送了同步的序列号， B收到后，建立接受缓冲区， 然后

发送A一个确认信号， 表示从A到B的数据传输通道建立， 
同理， B建立发送缓冲区，发送给A一个序列号， A收到后， 建立接受缓冲区， 

发送给B一个确认信号， 这样从B到A的数据传输通道建立。 
这样， 两条数据通道建立， 完成全双工通讯
 
