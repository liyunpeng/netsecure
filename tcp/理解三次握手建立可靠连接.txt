链路层：
链路层保证可以发送数据包， 

网际层：
IP网际层保证数据包可以从一个地方传到另一个地方，每个地方都有一个ip地址，

TCP的可靠传输：
TCP层在链路层和IP层的基础上，保证数据的可靠传输
所谓可靠就是不丢包的传输。 即保证包的有序和不丢包。
有序通过给每个数据包设定一个序列号，以保证传输的数据包有序， 
不丢包通过每个包的ack机制，以保证不丢包。

TCP的缓冲区：
上层会把数据包都丢给缓冲区，上层就认为已经发送了， 其实底层有些还没发送， 
这个机制可以做到一次性的发送很多数据包，一次性的收到多个数据包的确认， 
比如，发送序号为1，2，3的三个包，接收方等到3个包全收到后，再发送一个确认

TCP的滑动窗口：
但是每发一个数据包， 就要等一个ACK确认，再发下一个数据包，发送速度会很慢， 
所以就有了缓冲区和滑动窗口 
数据包可以分为： 已发送已确认，已发送未确认的，待发送的，和未发送的
所谓待发送，是指接受方已经通知发送方准备好了，发送方要尽快发送的数据
其中，已发送未确认的和待发送的这两部分组成的就是滑动窗口，
已发送未确认，会变为已发送已确认， 待发送的会变成已发送未确认， 
所以这个窗口随着发送和接收的确认，不断向右滑动，所以叫做滑动窗口。 

建立两条数据通道，完成全双工通讯。
数据通道总是单向的，A到B的通道，和B到A的通道是两条独立的通道。就像高速公路一样。
tcp是全双工通讯， 即双方可以同时接受和发送， 
这要求双发都有接收缓冲区，发送缓冲区， 
双发都有发送的序列号，和接收的序列号， 
建立连接时，必须把缓冲区和序列号都建立好。 
用三次握手建立发送的序列号。 
A发出SYN后，实际动作有建立发送缓冲区， 发送同步的序列号， 
B收到SYN后，建立接受缓冲区， 
B发送给A一个ACK确认信号。
至此，
A的发送缓冲区， B的接收缓冲区已经建立好。
A发给B的包的序列号也同步好了。
A到B的数据传输通道建立就建立好了。 

同理，B建立发送缓冲区，发送给A一个序列号， A收到后， 建立接受缓冲区， 
发送给B一个确认信号，这样从B到A的数据传输通道建立。 

这样，建立好了两条数据通道，完成全双工通讯。
 
