
### 证明的意义
PoRep必须能够防范以下三种常见的攻击方式：女巫攻击，外源攻击和生成攻击，他们的共同特点是攻击 __矿工实际存储的数据大小要比声称存储的数据小__ ，这样攻击矿工就能获得本不该他获得的报酬。

* 女巫攻击（Sybil Attack）：利用n个身份，承诺存储n份数据D，而 __实际上存储小于n份（比如1份）__ ，但是却提供了n份存储证明，攻击成功。

* 外部数据源攻击（Outsourcing Attack）：当攻击者矿工收到检验者要求提供数据D的证明的时候， __攻击者矿工从别的矿工那里生成证明__ ，证明自己一直存储了数据D，而实际上没有存储，攻击成功

* 生成攻击（Generation Attack）：攻击者A可以使用某种方式生成数据D，当检验者验证的时候，攻击者A就可以  __重新生成数据D来完成存储证明__ ，攻击成功. 防范生成攻击比较困难，所有的PoS协议都会遇到这样的问题，如何保证矿工真正的存储了这些数据，目前这还是个待解决的问题，PoRep需要解决这个问题，

Filecoin协议采用一种叫做 RepGame的游戏来验证是否解决了这三种攻击方式，

### 证明的种类
#### 存储证明PoS
存储证明（Proof-of-Storage ，PoS）：利用存储空间进行的证明。工作量证明的一种，Filecoin上面对应PoRep

#### 复制证明PoRep
复制证明（Proof-of-Replication，PoRep）：PoRep可以保证每份数据的存储都是独立的，复制证明是一个新型的存储证明。它可以让证明人提供存储证明给用户，证明用户的数据已经被复制存储到证明人唯一的专用物理存储设备上了。
复制证明也是一种交互式协议。当证明人承诺存储某数据的n个不同的副本（独立物理副本），然后通过响应协议来说服验证者，证明人确实已经存储了每个副本。PoRep改善了PDP（数据持有性验证）和PoR（可获取性证明）方案，并且阻止了女巫攻击、外包攻击、生成攻击。
1、假设我要存一个文件到某度云盘上，如果某度云服务器宕机了，假设我把文件只存在了该服务商，可能我的文件就拿不到了。而去中心化使我们不依赖于单一中心节点，即使某个节点宕机，我们还可以从其他的节点获取我们的文件，这就是去中心化的意义之一。
2、假设我存一个文件在IPFS某个存储提供者，我的文件内容肯定是不想让他看到的，那么就可以把我存储的文件加密，这样存储商只会存储我的文件但却看不知道我存储的究竟是什么，隐私可以得到有效保护。
3、如何确保存储提供者真的保存了我的文件呢？此时需要存储提供者定时向我或者链上提供他存储该文件的证明（POS）。而我可以通过该证明来验证他是否真的存储了我的文件。
4、假设我要把一个文件存储10份，如何确保存储提供商真正的存储了10份，而不是只存储了一份，等到验证的时候再复制出9份呢，这时候就需要给这9份文件加些不同的特征，可以认为这就是通常说的“加盐”。为了保证存储商不会从某份文件中生成出其余9份文件，我们可以使用一个编码慢而解码快的函数。其中一种实现就是Cipher block chaining，可以成功避免生成攻击。



#### 时空证明PoSt
时空证明（Proof-of-Spacetime，PoSt)：时空证明，矿工证明自己花费了spacetime资源, 即：一定时间内的存储空间的使用，PoSt是基于PoRep实现的。 
时空证明提出了证明链（proof-chain）的数据结构，证明链把一些的提问（challenge）和证明（proof）链接起来形成。
在证明链的基础上添加上时间段，这样就得到了一段时间内的矿工存储数据的证明，这就是时空证明（Proof of Spacetime，PoSt）。
PoSt可以证明在该段时间内矿工存储了特定的数据，并且利用时间戳锚定这些证明链，这样即使验证者（verifier）不在线，也能够在将来去验证矿工在该段时间内生成了证明链，PoSt会被提交到链上用来产生新的Block。


#### 证明参数文件的下载
```
./lotus fetch-params 2048
```
会把证明参数文件下载到`/var/tmp/filecoin-proof-parameters/`目录下面。 

