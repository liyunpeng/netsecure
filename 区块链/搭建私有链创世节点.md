### 标准步骤：
准备工作：上传lotus、lotus-storage-miner、lotus-seed版本。
```
1.   ./lotus fetch-params --proving-params 536870912
2.   ./lotus-seed pre-seal --sector-size  536870912  --num-sectors 5
3.   ./lotus-seed genesis new localnet.json
4.   ./lotus-seed genesis add-miner localnet.json ~/.genesis-sectors/pre-seal-t01000.json
5.    nohup ./lotus daemon --lotus-make-genesis=dev.gen --genesis-template=localnet.json --bootstrap=false > lotus.log 2>&1 &
6.    ./lotus wallet import ~/.genesis-sectors/pre-seal-t01000.key
7.    ./lotus-storage-miner init --genesis-miner --actor=t01000 --sector-size=536870912 --pre-sealed-sectors=~/.genesis-sectors --pre-sealed-metadata=~/.genesis-sectors/pre-seal-t01000.json --nosync
8.    nohup ./lotus-storage-miner run --nosync >miner.log 2>&1 &
9.    ./lotus-storage-miner fconfig autogarbage false
10.   ./lotus wallet set-default  t3地址
```

###  获取证明参数文件
mac 上的实验数据：

./lotus fetch-params --proving-params 2048

du -sch /var/tmp/filecoin-proof-parameters/
1.1G	/var/tmp/filecoin-proof-parameters/
1.1G	total


#### seed pre-seal 
```
➜  lotustest ./lotus-seed pre-seal --sector-size 2048  --num-sectors 5
sector-id: {1000 0}, piece info: {2048 bafk4chzaikpr46qbf6tdjufoozqrejzsqkk66i7stavvrx5oktgt2wskx45a}
2020-06-21T15:59:45.961+0800	WARN	preseal	seed/seed.go:100	PreCommitOutput: {1000 0} bafk4ehzaavtxkpfnlv25qsgy7u7ripuxap5zprnirqejfumbb5zmuddtrffa bafk4chzaikpr46qbf6tdjufoozqrejzsqkk66i7stavvrx5oktgt2wskx45a
sector-id: {1000 1}, piece info: {2048 bafk4chzacil7x45ioxpbj3xz7r4hmo4qjtljphnkk4z6etpevrjoc53z7amq}
2020-06-21T15:59:45.991+0800	WARN	preseal	seed/seed.go:100	PreCommitOutput: {1000 1} bafk4ehzan2g7xntx2umacevdnct5izwkivtdpbzpafzwz2zpamrdkvastria bafk4chzacil7x45ioxpbj3xz7r4hmo4qjtljphnkk4z6etpevrjoc53z7amq
sector-id: {1000 2}, piece info: {2048 bafk4chzavsaszg2v5zz3th25igbssj7t6vkyssnlgafxc5i4nppls7fveima}
2020-06-21T15:59:46.020+0800	WARN	preseal	seed/seed.go:100	PreCommitOutput: {1000 2} bafk4ehzamnrezpu4c57bev234fbzupx4vuk2kjaceqngb4cl3fuux3g6gjxq bafk4chzavsaszg2v5zz3th25igbssj7t6vkyssnlgafxc5i4nppls7fveima
sector-id: {1000 3}, piece info: {2048 bafk4chzad2ttxc7fxiemr6sircdhglc6mhn5nmpraluojsnq5aadglnf6q6a}
2020-06-21T15:59:46.050+0800	WARN	preseal	seed/seed.go:100	PreCommitOutput: {1000 3} bafk4ehzayocllxmkwc4xpnkkza2iqtz6vtn3j3gjthgo6qmxmurwdgwe7ngq bafk4chzad2ttxc7fxiemr6sircdhglc6mhn5nmpraluojsnq5aadglnf6q6a
sector-id: {1000 4}, piece info: {2048 bafk4chzam6iqpjl6l62ol4grofo2dt5sc3svtoigr6il55y4y7e64ic6cepa}
2020-06-21T15:59:46.080+0800	WARN	preseal	seed/seed.go:100	PreCommitOutput: {1000 4} bafk4ehzahjvfltfyxoooj4vwakwavwe4xajec3e27q7waposkugn3lhicjhq bafk4chzam6iqpjl6l62ol4grofo2dt5sc3svtoigr6il55y4y7e64ic6cepa
2020-06-21T15:59:46.081+0800	WARN	preseal	seed/seed.go:124	PeerID not specified, generating dummy
2020-06-21T15:59:46.082+0800	INFO	preseal	seed/seed.go:179	Writing preseal manifest to /Users/zhenglun1/.genesis-sectors/pre-seal-t01000.json
```

#### 生成.genesis-sectors目录
./lotus-seed genesis new localnet.json
在用户跟目录下生成 .genesis-sectors 目录 
➜  lotustest ll -a ~/.genesis-sectors
total 32
drwxr-xr-x   8 zhenglun1  staff   256B  6 21 15:59 .
drwxr-xr-x+ 48 zhenglun1  staff   1.5K  6 21 16:03 ..
drwxr-xr-x   7 zhenglun1  staff   224B  6 21 15:59 cache
-rw-r--r--   1 zhenglun1  staff   4.3K  6 21 15:59 pre-seal-t01000.json
-rw-r--r--   1 zhenglun1  staff   148B  6 21 15:59 pre-seal-t01000.key
drwxr-xr-x   7 zhenglun1  staff   224B  6 21 15:59 sealed
-rw-r--r--   1 zhenglun1  staff   106B  6 21 15:59 sectorstore.json
drwxr-xr-x   7 zhenglun1  staff   224B  6 21 15:59 unsealed

#### 创建创世节点矿工
➜  lotustest ./lotus-seed genesis add-miner localnet.json ~/.genesis-sectors/pre-seal-t01000.json
2020-06-21T16:04:38.653+0800	INFO	lotus-seed	lotus-seed/genesis.go:107	Adding miner t01000 to genesis template
2020-06-21T16:04:38.653+0800	INFO	lotus-seed	lotus-seed/genesis.go:124	Giving t3u6gvbw35viq3q66tfxyc6nh3igs74trvxmfai2bs275ka7lcvlt5cbisugaew3exd72avgtlkaaxmfqdy3ua some initial balance


----

nohup ./lotus daemon --lotus-make-genesis=dev.gen --genesis-template=localnet.json --bootstrap=false > lotus.log 2>&1 &
没起来 ， lotus.log 末尾看到的错误
2020-06-21T16:40:55.322+0800	WARN	main	lotus/main.go:81	initializing node:
    main.glob..func2
        /Users/zhenglun1/goworkspace/lotus/lotus/cmd/lotus/daemon.go:231
  - starting node:
    github.com/filecoin-project/lotus/node.New
        /Users/zhenglun1/goworkspace/lotus/lotus/node/builder.go:492
  - could not build arguments for function "github.com/filecoin-project/lotus/node/modules/lp2p".StartListening.func1 (/Users/zhenglun1/goworkspace/lotus/lotus/node/modules/lp2p/addrs.go:98): failed to build host.Host: could not build arguments for function "reflect".makeFuncStub (/Users/zhenglun1/goroot/go/src/reflect/asm_amd64.s:12): failed to build lp2p.BaseIpfsRouting: could not build arguments for function "reflect".makeFuncStub (/Users/zhenglun1/goroot/go/src/reflect/asm_amd64.s:12): failed to build dtypes.NetworkName: could not build arguments for function "reflect".makeFuncStub (/Users/zhenglun1/goroot/go/src/reflect/asm_amd64.s:12): failed to build dtypes.AfterGenesisSet: function "reflect".makeFuncStub (/Users/zhenglun1/goroot/go/src/reflect/asm_amd64.s:12) returned a non-nil error: genesis func failed: make genesis block: failed to verify presealed data: failed to add verified client: doExec apply message failed: Allowance 10240 below MinVerifiedDealSize for add verified client t3tahdt24chfchkzgk7mmhtakfc2mvilifdluru4rvc7cg7kbwgtcw5kxqjq42ydnxo3xnrgebsmrfkxuiun7q (RetCode=16)
  - 

#### import 创世节点的key
➜  lotustest ./lotus wallet import ~/.genesis-sectors/pre-seal-t01000.key
imported key t3u6gvbw35viq3q66tfxyc6nh3igs74trvxmfai2bs275ka7lcvlt5cbisugaew3exd72avgtlkaaxmfqdy3ua successfully!
### add miner 命令输出： 
```
[fil@yangzhou010010019019 ~]$ ./lotus-seed genesis add-miner localnet.json ~/.genesis-sectors/pre-seal-t01000.json
2020-06-17T16:20:00.607+0800	INFO	lotus-seed	Adding miner t01000 to genesis template
2020-06-17T16:20:00.607+0800	INFO	lotus-seed	Giving t3vg5iq2gtiuswn45kny5wkiiqueac57yizoqhy4bwcowdkp3nhr43tbodkginxmlcod2abos3vzlzsmtb632a some initial balance
```


### 解决wallet import时的 connect: connection refused 问题

```	
[fil@yangzhou010010019019 ~]$ ./lotus wallet import ~/.genesis-sectors/pre-seal-t01000.key
2020-06-18T10:21:13.619+0800 WARN jsonrpc2 unable to make request, will retry after 4s: dial tcp 127.0.0.1:1234: connect: connection refused {"method": "WalletImport", "id": 1, "client": "qyMzbMlVU3Y="}
2020-06-18T10:21:17.620+0800	WARN	jsonrpc2	unable to make request, will retry after 8s: dial tcp 127.0.0.1:1234: connect: connection refused	{"method": "WalletImport", "id": 1, "client": "qyMzbMlVU3Y="}
2020-06-18T10:21:25.623+0800	WARN	jsonrpc2	unable to make request, will retry after 16s: dial tcp 127.0.0.1:1234: connect: connection refused	{"method": "WalletImport", "id": 1, "client": "qyMzbMlVU3Y="}
2020-06-18T10:21:32.229+0800	WARN	main	context done


[fil@yangzhou010010019019 ~]$ tail lotus.log
2020-06-18T10:21:13.330+0800	WARN	main	initializing node:
    main.glob..func2
        /builds/ForceMining/lotus-force/cmd/lotus/daemon.go:253
  - starting node:
    github.com/filecoin-project/lotus/node.New
        /builds/ForceMining/lotus-force/node/builder.go:514
  - could not build arguments for function "github.com/filecoin-project/lotus/node/modules".RunHello (/builds/ForceMining/lotus-force/node/modules/services.go:36): failed to build *hello.Service: could not build arguments for function "reflect".makeFuncStub (/usr/local/go/src/reflect/asm_amd64.s:12): failed to build *chain.Syncer: could not build arguments for function "reflect".makeFuncStub (/usr/local/go/src/reflect/asm_amd64.s:12): failed to build beacon.RandomBeacon: could not build arguments for function "reflect".makeFuncStub (/usr/local/go/src/reflect/asm_amd64.s:12): failed to build *pubsub.PubSub: could not build arguments for function "reflect".makeFuncStub (/usr/local/go/src/reflect/asm_amd64.s:12): failed to build dtypes.DrandBootstrap: function "reflect".makeFuncStub (/usr/local/go/src/reflect/asm_amd64.s:12) returned a non-nil error: lookup _dnsaddr.pl-sin.testnet.drand.sh on 114.114.114.114:53: dial udp 114.114.114.114:53: i/o timeout
```

解决办法： 修改resolv.conf
```
[fil@yangzhou010010019019 ~]$ cat /etc/resolv.conf
# Generated by NetworkManager
nameserver 10.100.0.2
nameserver 8.8.8.8
nameserver 114.114.114.114
nameserver 223.5.5.5
search lotus.svc.cluster.local. svc.cluster.local. cluster.local. localdomain
options ndots:5
```
修改为：
```
[fil@yangzhou010010019019 ~]$ cat /etc/resolv.conf
# Generated by NetworkManager
nameserver 10.100.0.2
nameserver 8.8.8.8
nameserver 114.114.114.114
# nameserver 223.5.5.5
# search lotus.svc.cluster.local. svc.cluster.local. cluster.local. #localdomain
# options ndots:5
```


重新运行lotus

```
[fil@yangzhou010010019019 ~]$ nohup ./lotus daemon --lotus-make-genesis=dev.gen --genesis-template=localnet.json --bootstrap=false > lotus.log 2>&1 &
[1] 5181

[fil@yangzhou010010019019 ~]$ ps -ef | grep lotus
fil       5181  5108  4 10:23 pts/2    00:00:00 ./lotus daemon --lotus-make-genesis=dev.gen --genesis-template=localnet.json --bootstrap=false
fil       5290  5108  0 10:23 pts/2    00:00:00 grep --color=auto lotus

```



### 导入key

```
[fil@yangzhou010010019019 ~]$ ./lotus wallet import ~/.genesis-sectors/pre-seal-t01000.key
imported key t3qatw4uw7kdcbm7gbotxuqlapiy2tguywavnzqycykkclemdw3vuxbgxdh2yv2ipjca35chmxapavx5czenwa successfully!
```


### 初始化 miner
```
[fil@yangzhou010010019019 ~]$ ./lotus-storage-miner init --genesis-miner --actor=t01000 --sector-size=536870912 --pre-sealed-sectors=~/.genesis-sectors --pre-sealed-metadata=~/.genesis-sectors/pre-seal-t01000.json --nosync
2020-06-18T10:24:07.579+0800	INFO	main	Initializing lotus storage miner
2020-06-18T10:24:07.579+0800	INFO	main	Checking proof parameters
2020-06-18T10:24:07.580+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-0170db1f394b35d995252228ee359194b13199d259380541dc529fb0099096b0.vk is ok
2020-06-18T10:24:07.582+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-8-0-sha256_hasher-82a357d2f2ca81dc61bb45f4a762807aedee1b0a53fd6c4e77b46a01bfef7820.vk is ok
2020-06-18T10:24:07.582+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-8-0-559e581f022bb4e4ec6e719e563bf0e026ad6de42e56c18714a2c692b1b88d7e.vk is ok
2020-06-18T10:24:07.582+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-7d739b8cf60f1b0709eeebee7730e297683552e4b69cab6984ec0285663c5781.vk is ok
2020-06-18T10:24:07.582+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-8-2-b62098629d07946e9028127e70295ed996fe3ed25b0f9f88eb610a0ab4385a3c.vk is ok
2020-06-18T10:24:07.582+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-0-0-sha256_hasher-ecd683648512ab1765faa2a5f14bab48f676e633467f0aa8aad4b55dcb0652bb.vk is ok
2020-06-18T10:24:07.582+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-50c7368dea9593ed0989e70974d28024efa9d156d585b7eea1be22b2e753f331.vk is ok
2020-06-18T10:24:07.582+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-3ea05428c9d11689f23529cde32fd30aabd50f7d2c93657c1d3650bca3e8ea9e.vk is ok
2020-06-18T10:24:07.580+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-0-0-sha256_hasher-032d3138d22506ec0082ed72b2dcba18df18477904e35bafee82b3793b06832f.vk is ok
2020-06-18T10:24:07.582+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-0cfb4f178bbb71cf2ecfcd42accce558b27199ab4fb59cb78f2483fe21ef36d9.vk is ok
2020-06-18T10:24:07.583+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-5294475db5237a2e83c3e52fd6c2b03859a1831d45ed08c4f35dbf9a803165a9.vk is ok
2020-06-18T10:24:07.583+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-0-0-sha256_hasher-6babf46ce344ae495d558e7770a585b2382d54f225af8ed0397b8be7c3fcd472.vk is ok
2020-06-18T10:24:07.583+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-8-2-sha256_hasher-96f1b4a04c5c51e4759bbf224bbc2ef5a42c7100f16ec0637123f16a845ddfb2.vk is ok
2020-06-18T10:24:07.590+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-8-0-0377ded656c6f524f1618760bffe4e0a1c51d5a70c4509eedae8a27555733edc.vk is ok
2020-06-18T10:24:07.591+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-8-2-2627e4006b67f99cef990c0a47d5426cb7ab0a0ad58fc1061547bf2d28b09def.vk is ok
2020-06-18T10:24:07.690+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-0cfb4f178bbb71cf2ecfcd42accce558b27199ab4fb59cb78f2483fe21ef36d9.params is ok
2020-06-18T10:24:07.894+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-7d739b8cf60f1b0709eeebee7730e297683552e4b69cab6984ec0285663c5781.params is ok
2020-06-18T10:24:10.452+0800	INFO	build	Parameter file /var/tmp/filecoin-proof-parameters/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-0-0-sha256_hasher-6babf46ce344ae495d558e7770a585b2382d54f225af8ed0397b8be7c3fcd472.params is ok
2020-06-18T10:24:10.452+0800	INFO	build	parameter and key-fetching complete
2020-06-18T10:24:10.452+0800	INFO	main	Trying to connect to full node RPC
2020-06-18T10:24:10.453+0800	INFO	main	Checking full node sync status
2020-06-18T10:24:10.453+0800	INFO	main	Checking if repo exists
2020-06-18T10:24:10.453+0800	INFO	main	Checking full node version
2020-06-18T10:24:10.454+0800	INFO	main	Initializing repo
2020-06-18T10:24:10.454+0800	INFO	repo	Initializing repo at '/home/fil/.lotusstorage'
2020-06-18T10:24:10.455+0800	INFO	main	Setting up storage config with presealed sectors: [~/.genesis-sectors]
2020-06-18T10:24:10.455+0800	INFO	main	Initializing libp2p identity
2020-06-18T10:24:10.461+0800	INFO	badger	All 0 tables opened in 0s

2020-06-18T10:24:10.465+0800	INFO	badger	All 0 tables opened in 0s

2020-06-18T10:24:10.469+0800	INFO	badger	All 0 tables opened in 0s

2020-06-18T10:24:10.473+0800	INFO	badger	All 0 tables opened in 0s

2020-06-18T10:24:10.476+0800	INFO	badger	All 0 tables opened in 0s

2020-06-18T10:24:10.481+0800	INFO	stores	New sector storage: e2f08604-2123-4032-9fc4-f7a28b2488d3
2020-06-18T10:24:10.481+0800	INFO	stores	New sector storage: d1dc3775-8280-4724-8609-10ed0cb3ac37


2020-06-18T10:24:20.493+0800	WARN	miner	base height is 0 null rounds is 0
2020-06-18T10:24:20.506+0800	INFO	main	Waiting for message: bafy2bzaceaarsmpajfr6oumtbkzh5fymfmzjtmdhguuxwxed7hcuyhhmcqr5q
2020-06-18T10:24:27.270+0800	INFO	miner	Time delta between now and our mining base: 334s (nulls: 0)
2020-06-18T10:24:27.292+0800	WARN	storageminer	Generating fake EPost proof! You should only see this while running tests!
2020-06-18T10:24:27.309+0800	INFO	miner	mined new block	{"cid": "bafy2bzaced2js3tidamc45tr3qa4joyydhbwmtucaxp6ihoepyocdgst2hgdi", "height": "1", "took": 6.815735289}
2020-06-18T10:24:27.310+0800	WARN	miner	CAUTION: block production took longer than the block delay. Your computer may not be fast enough to keep up
2020-06-18T10:24:27.310+0800	WARN	miner	tMinerBaseInfo 	{"duration": 6.774692698}
2020-06-18T10:24:27.310+0800	WARN	miner	tDrand 	{"duration": 0.000000194}
2020-06-18T10:24:27.310+0800	WARN	miner	tPowercheck 	{"duration": 0.001195107}
2020-06-18T10:24:27.310+0800	WARN	miner	tTicket 	{"duration": 0.022033533}
2020-06-18T10:24:27.310+0800	WARN	miner	tSeed 	{"duration": 0.0000085}
2020-06-18T10:24:27.310+0800	WARN	miner	tPending 	{"duration": 0.001068005}
2020-06-18T10:24:27.310+0800	WARN	miner	tCreateBlock 	{"duration": 0.016737252}
2020-06-18T10:24:27.310+0800	WARN	miner	mined block in the past	{"block-time": "2020-06-18T10:18:55.000+0800", "time": "2020-06-18T10:24:27.310+0800", "duration": 332.310724821}
2020-06-18T10:24:27.342+0800	WARN	miner	base height is 1 null rounds is 0
2020-06-18T10:24:27.345+0800	INFO	miner	Time delta between now and our mining base: 332s (nulls: 0)
2020-06-18T10:24:27.365+0800	WARN	storageminer	Generating fake EPost proof! You should only see this while running tests!
2020-06-18T10:24:27.376+0800	INFO	miner	mined new block	{"cid": "bafy2bzacecewadp4n6gciisrup52zzll2olh3psayv3buzcq2fwpnjvwdjwc4", "height": "2", "took": 0.03418066}
2020-06-18T10:24:27.376+0800	WARN	miner	mined block in the past	{"block-time": "2020-06-18T10:18:57.000+0800", "time": "2020-06-18T10:24:27.376+0800", "duration": 330.37670733}
2020-06-18T10:24:27.404+0800	WARN	miner	base height is 2 null rounds is 0
2020-06-18T10:24:27.410+0800	INFO	miner	Time delta between now and our mining base: 330s (nulls: 0)
2020-06-18T10:24:27.430+0800	WARN	storageminer	Generating fake EPost proof! You should only see this while running tests!
2020-06-18T10:24:27.441+0800	INFO	miner	mined new block	{"cid": "bafy2bzacea3gjq55pibqzget6sr4ksjqbs26rkn6x6ijhmsdyaquxipsocnxs", "height": "3", "took": 0.036264291}
2020-06-18T10:24:27.441+0800	WARN	miner	mined block in the past	{"block-time": "2020-06-18T10:18:59.000+0800", "time": "2020-06-18T10:24:27.441+0800", "duration": 328.441253526}
2020-06-18T10:24:27.471+0800	WARN	miner	base height is 3 null rounds is 0
2020-06-18T10:24:27.477+0800	INFO	miner	Time delta between now and our mining base: 328s (nulls: 0)
2020-06-18T10:24:27.498+0800	WARN	storageminer	Generating fake EPost proof! You should only see this while running tests!
2020-06-18T10:24:27.509+0800	INFO	miner	mined new block	{"cid": "bafy2bzaceaem6fskmm2dyu76wbubiztws3qnstvqggn6sf7udga2ykqfvbsjc", "height": "4", "took": 0.037869489}
2020-06-18T10:24:27.509+0800	WARN	miner	mined block in the past	{"block-time": "2020-06-18T10:19:01.000+0800", "time": "2020-06-18T10:24:27.509+0800", "duration": 326.509743883}
2020-06-18T10:24:27.540+0800	WARN	miner	base height is 4 null rounds is 0
2020-06-18T10:24:27.546+0800	INFO	miner	Time delta between now and our mining base: 326s (nulls: 0)
2020-06-18T10:24:27.567+0800	WARN	storageminer	Generating fake EPost proof! You should only see this while running tests!
2020-06-18T10:24:27.577+0800	INFO	miner	mined new block	{"cid": "bafy2bzacea3vuojvg24ajh7idhj6ashtrmdlr34dejv4mf4djokdlrfhyeaqi", "height": "5", "took": 0.037552167}
2020-06-18T10:24:27.578+0800	WARN	miner	mined block in the past	{"block-time": "2020-06-18T10:19:03.000+0800", "time": "2020-06-18T10:24:27.578+0800", "duration": 324.578207726}
2020-06-18T10:24:27.608+0800	WARN	miner	base height is 5 null rounds is 0
2020-06-18T10:24:27.614+0800	INFO	miner	Time delta between now and our mining base: 324s (nulls: 0)
2020-06-18T10:24:27.636+0800	WARN	storageminer	Generating fake EPost proof! You should only see this while running tests!
2020-06-18T10:24:27.647+0800	INFO	miner	mined new block	{"cid": "bafy2bzaceco5ecc5uhnqxx4yemyku4tsnn2mk4t322dnxhr53v7hgueteq2yk", "height": "6", "took": 0.038129548}
2020-06-18T10:24:27.647+0800	WARN	miner	mined block in the past	{"block-time": "2020-06-18T10:19:05.000+0800", "time": "2020-06-18T10:24:27.647+0800", "duration": 322.647143238}
2020-06-18T10:24:27.678+0800	WARN	miner	base height is 6 null rounds is 0
2020-06-18T10:24:27.684+0800	INFO	miner	Time delta between now and our mining base: 322s (nulls: 0)
2020-06-18T10:24:27.702+0800	WARN	storageminer	Generating fake EPost proof! You should only see this while running tests!
2020-06-18T10:24:27.710+0800	INFO	miner	mined new block	{"cid": "bafy2bzacecqzwprazizyokihis2arjjjnltaeu4n5cmjll7q7aqh4gsblly72", "height": "7", "took": 0.032179137}
2020-06-18T10:24:27.710+0800	WARN	miner	mined block in the past	{"block-time": "2020-06-18T10:19:07.000+0800", "time": "2020-06-18T10:24:27.710+0800", "duration": 320.710809361}
2020-06-18T10:24:27.740+0800	WARN	miner	base height is 7 null rounds is 0
2020-06-18T10:24:27.747+0800	INFO	miner	Time delta between now and our mining base: 320s (nulls: 0)
2020-06-18T10:24:27.768+0800	WARN	storageminer	Generating fake EPost proof! You should only see this while running tests!
2020-06-18T10:24:27.778+0800	INFO	miner	mined new block	{"cid": "bafy2bzaceaeydsfgvwnoqkvr2qsb2vposkvllbigmtitirrheascjdy34n7dw", "height": "8", "took": 0.038443548}
2020-06-18T10:24:27.779+0800	WARN	miner	mined block in the past	{"block-time": "2020-06-18T10:19:09.000+0800", "time": "2020-06-18T10:24:27.779+0800", "duration": 318.779004307}
2020-06-18T10:24:27.805+0800	INFO	main	Importing pre-sealed sector metadata for t01000
2020-06-18T10:24:27.816+0800	INFO	main	Setting next sector ID to 5
2020-06-18T10:24:27.816+0800	INFO	badger	Got compaction priority: {level:0 score:1.73 dropPrefix:[]}
2020-06-18T10:24:27.817+0800	INFO	badger	Got compaction priority: {level:0 score:1.73 dropPrefix:[]}
2020-06-18T10:24:27.818+0800	INFO	badger	Got compaction priority: {level:0 score:1.73 dropPrefix:[]}
2020-06-18T10:24:27.818+0800	INFO	badger	Got compaction priority: {level:0 score:1.73 dropPrefix:[]}
2020-06-18T10:24:27.819+0800	INFO	badger	Got compaction priority: {level:0 score:1.73 dropPrefix:[]}
2020-06-18T10:24:27.819+0800	INFO	main	Storage miner successfully created, you can now start it with 'lotus-storage-miner run'
```



### 运行 miner
```
[fil@yangzhou010010019019 ~]$ nohup ./lotus-storage-miner run --nosync >miner.log 2>&1 &
[2] 7402
```

### 设置 miner autogarbage false

```
[fil@yangzhou010010019019 ~]$ ./lotus-storage-miner fconfig autogarbage false
2020-06-18T10:25:02.597+0800	WARN	main	could not get API info:
    github.com/filecoin-project/lotus/cli.GetRawAPI
        /builds/ForceMining/lotus-force/cli/cmd.go:151
  - could not get api endpoint:
    github.com/filecoin-project/lotus/cli.GetAPIInfo
        /builds/ForceMining/lotus-force/cli/cmd.go:134
  - API not running (no endpoint)
```
could not get API info: 的原因是 miner run 还没准备好
```
[fil@yangzhou010010019019 ~]$ ./lotus-storage-miner fconfig autogarbage false
The autogarbage is set to false

[fil@yangzhou010010019019 ~]$ ps -ef | grep lotus
fil       5181  5108 22 10:23 pts/2    00:00:29 ./lotus daemon --lotus-make-genesis=dev.gen --genesis-template=localnet.json --bootstrap=false
fil       7402  5108 99 10:24 pts/2    00:03:54 ./lotus-storage-miner run --nosync
fil       9221  5108  0 10:25 pts/2    00:00:00 grep --color=auto lotus
```


### 设置wallet t3
```
[fil@yangzhou010010019019 ~]$ ./lotus wallet list
t3qatw4uw7kdcbm7gbotxuqlapiy2tguywavnzqycykkclemdw3vuxbgxdh2yv2ipjca35chmxapavx5czenwa
[fil@yangzhou010010019019 ~]$ ./lotus wallet set-default t3qatw4uw7kdcbm7gbotxuqlapiy2tguywavnzqycykkclemdw3vuxbgxdh2yv2ipjca35chmxapavx5czenwa
```

### 验证 私有链 

```
[fil@yangzhou010010019019 ~]$ ./lotus chain list

561: (Jun 18 10:37:35) [ bafy2bzaceat72lwfaz53u77odvr5ork3in3ak3jynda6nkmdjpukw5lbpnbbg: t01000, ]
562: (Jun 18 10:37:37) [ bafy2bzacecsmc7ctgl5gybov2vjzusamfbcfo6yqzpojp4khtchi5jybu2bs4: t01000, ]
563: (Jun 18 10:37:39) [ bafy2bzacebe6aeq6mwtn2lc7ietkey4l2dlb4stk2xq2dgf3ssfuupmmr5jky: t01000, ]
565: (Jun 18 10:37:43) [ bafy2bzacedevblorxkaqpqpj6pqkmc3aorrgsxz6lsarovpgcvjbwtial2r7o: t01000, ]
566: (Jun 18 10:37:45) [ bafy2bzacebv3winb432uwtwtmctogm7ntheyo45lgybmpiiu7dd5bljfguva6: t01000, ]
567: (Jun 18 10:37:47) [ bafy2bzacea7lwqozsiylxhzokgadjmrm7u2dheco6vjlyfpzhdymgifzdtsj4: t01000, ]
568: (Jun 18 10:37:49) [ bafy2bzaceblwplpmbkd2hpyzujhu5m7rrrljz3jruqdmni6qveon62scq5omu: t01000, ]
569: (Jun 18 10:37:51) [ bafy2bzaced3utelgdzg34zncirccygodabhvyfm6turvf7qsamdzk7xl2izuc: t01000, ]
570: (Jun 18 10:37:53) [ bafy2bzaceaetauzb7bxwfe3h754sqrcujdknmrjhyphf3tulzsmsvi7kd2dvs: t01000, ]
```
链的高度在涨， 


再看miner info
```
[fil@yangzhou010010019019 ~]$ ./lotus-storage-miner info
Mode: sealer
Miner: t01000
Sector Size: 2 KiB
Byte Power:   12 KiB / 12 KiB (100.0000%)
Actual Power: 102 Ki / 102 Ki (100.0000%)
	Committed: 12 KiB
	Proving: 12 KiB
Expected block win rate: 43200.0000/day (every 2s)

Miner Balance: 1070.819073103124116932
	PreCommit:   0
	Locked:      1070.813581942929043601
	Available:   0.005491160195073331
Worker Balance: 49999999.81147079445565332
Market (Escrow):  0
Market (Locked):  0
	Total: 6
	Proving: 6
```

























