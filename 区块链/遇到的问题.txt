

#### 数据库被误删除的问题。 

如果task表被删除， 损失是极大的， 所以一定要保证这样的数据永不丢失， 

一是杜绝这中删除操作， 

一要模拟这样情况， 万一出现， 怎么恢复， 要事前把这种情况摸捏出来， 并有

一般有binlog 在， 可以恢复。 

如果是删除表， 可能就永远找不回来， 对于删表的动作是绝对禁止的， 

任何情况， 是决不允许在生产环境做试验。 


是否要引入规则， 生产环境， 不允许手动执行sql语句。 

不要遇到了问题， 才想问题的解决方案，防止措施， 因为有些问题， 输不起， 如果数据丢失了， 交不出证明， 就会被惩罚，  

sector要做windowpost, task不会做windowpost， task丢失的严重性不是很严重。 

给定sector能找到那个

数据库的设计要图示出来。 

打这么多error, 不把他打爆了


备一个永远不会删除数据库。 


你认为不会依靠人的认识不会发生的事情， 不代表不会发生， 
比如生产环境的数据库， 都知道其重要性， 认为是绝对不会人为删除， 但恰恰有人不小心删除了， 而且是开发人员， 知道起严重性， 事后都非常非常的害怕。 

所以不能依赖人的执行，

所以要程序化， 自动化，而且充分的测试， 


数据有绝对的恢复能力 

要知道数据就是金钱

能用可视化去看的， 不要用sql查询了


不要为了方便， 引入错误。 

增加binlog. 

两G多的数据，十几分钟的sql的执行， 可以恢复了。 

先把windowpost做了
#### 磁盘io满的问题导致lotus不能同步， 这个问题应该提前能预测到， 就像高铁几百公里的时速， 得提前5公里判断前方的情况， 

#### 如何防患于未然



####  宁波表被误删除前， 集群统计情况
![-w1862](media/15995324409814.jpg)



![-w1862](media/15995324841726.jpg)

要测试也要在小集群上测试


#### 配比方案的资源利用率， 

统计每台机器的cpu核数使用率， 

统计内存的使用率

#### 配比方案的模拟自动化， 

配比方案对后面的集群部署起决定作用， 所以配比方案， 更不容许出错， 出错后的， 有点想蝴蝶效应， 会把错误放大10几倍。 



#### 可视化

集群管理， 可视化， 
沟通交流， 用图表示出来， 确认对方明白自己的意思


#### 出块速度慢， 而消息产生的速度太快， 消息又要让本地矿工打包出块， 造成消息大量积压。 